{"type":"group","name":"mappy","enabled":true,"items":[{"type":"function","name":"onInstall","enabled":true,"code":"// Place any code here you'd like to autorun when the package is installed"},{"type":"function","name":"onUninstall","enabled":true,"code":"// Place any code here you'd like to autorun when the package is uninstalled"},{"type":"alias","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\n  var url = \"https://ire-mudlet-mapping.github.io/AchaeaCrowdmap/Map/map_mini.json\";\n\n  \n  fetch(url) \n   .then( res => { return res.json(); } ) \n   .then( data => {\n\tmap = data;\n    console.log(map);\n} ) \n   .catch( err => {\n   display_notice(error); \n   display_notice(\"fail\", \"white\");\n\n} );"}],"text":"mappy load","matching":"begins","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"alias","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nvar searchTerm = args[1];\nvar area = \"\";\nvar roomName = \"\";\nvar roomID = 0;\nvar results = [];\n\nvar areas = map.areas;\n\nareas.forEach(function(el) {\n  //console.log(el.rooms);\n  var rooms = el.rooms;\n  // console.log(rooms);\n  rooms.forEach(function(el2) {\n    if(el2.name) {\n    \troomName = el2.name;\n    \t//console.log(\"Room Name:\");\n    \t//console.log(roomName);\n\t\tif(roomName.toLowerCase().includes(searchTerm.toLowerCase())) {\n      var found = {};\n      found.name = el2.name;\n      found.ID = el2.id;\n      found.area = el.name;\n      // console.log(found);\n      results.push(found);\n      // console.log(results);\n    }\n    }\n  });\n  \n});\n\nvar resultStr = \"\";\nresultStr += \"Results matching: \" + searchTerm + \"\\n\";\nresultStr += \"--------------------------\\n\";\nresults.forEach(function(el) {\n  resultStr += el.ID + \": \" + el.area + \" - \" + el.name + \"\\n\";\n});\nresultStr += \"--------------------------\\n\";\n\ndisplay_notice(resultStr, \"white\");"}],"text":"mappy find (.+)","matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"alias","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nvar currentAreaID = GMCP.Location.areaid;\nvar areaObj = {};\n\nvar areas = map.areas;\n\nareas.forEach(function(el) {\n  if(el.id == currentAreaID) {\n    areaObj = el;\n  }\n});\n\nareaRooms = areaObj.rooms;\nvar str = \"Rooms in current area (\" + areaObj.name + \"):\\n\";\nstr += \"--------------------------------\\n\";\nareaRooms.forEach(function(el) {\n  str += \"(\" + el.id + \") \" + el.name + \"\\n\";\n});\nstr += \"--------------------------------\\n\";\n\ndisplay_notice(str, \"white\");"}],"text":"mappy list rooms","matching":"begins","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"function","name":"onLoad","enabled":true,"code":"//Enter the script here\n  var url = \"https://ire-mudlet-mapping.github.io/AchaeaCrowdmap/Map/map_mini.json\";\n\n  \n  fetch(url) \n   .then( res => { return res.json(); } ) \n   .then( data => {\n\tmap = data;\n    console.log(map);\n} ) \n   .catch( err => {\n   display_notice(error); \n   display_notice(\"fail\", \"white\");\n\n} );"},{"type":"alias","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nvar area = GMCP.Location.area;\nvar areaid = GMCP.Location.areaid;\nvar roomname = GMCP.Location.roomname;\nvar roomid = GMCP.Location.id;\n\nconsole.log(GMCP.Location);\nvar str = \"Mappy Info Here\\n\";\nstr += \"--------------------------------\\n\";\nstr += \"Area: \" + area + \" (\" + areaid + \")\\n\";\nstr += roomname + \"\\n\";\nstr += \"ID: \" + roomid + \"\\n\";\n\ndisplay_notice(str, \"white\");"}],"text":"mappy info here","matching":"begins","whole_words":true,"case_sensitive":true,"prefix_suffix":true},{"type":"alias","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"//Enter the script here\nvar str = \"Mappy\\n\";\nstr += \"--------------------------------\\n\";\nstr += \"MAPPY LOAD - load the map. This shouldn't be necessary but is included just in case.\\n\";\nstr += \"MAPPY LIST ROOMS - list all rooms in current area\\n\";\nstr += \"MAPPY FIND <search terms> - Find a room that matches the search terms. Partial room name works too\\n\";\nstr += \"MAPPY INFO HERE - information about current room\\n\";\n\ndisplay_notice(str, \"white\");"}],"text":"mappy","matching":"exact","whole_words":true,"case_sensitive":false,"prefix_suffix":true}],"description":""}